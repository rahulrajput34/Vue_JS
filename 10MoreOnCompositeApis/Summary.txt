// In this lecuture we want to create the  textarea and want to give the event when the we press the tab it will give the four space over there

// So for that we write the basic and the first basic code is looks like below
// This is the first simple code with commets


// **********************************  1st update  *******************************************

<script setup>
// TODO: Functinality for if the tag is pressed give four space

import { onMounted, ref } from 'vue';
// TODO: This is how we can access eny element from the componenet
// Just pass this varibale name inside that component
let textarea = ref(null);  // helps to just get the reference of that elemenet
// console.log(textarea);


// The mounted is helpful to get the html of the given ref
onMounted(() => {
  //To get the value inside the give elemenet, we must give value.value because we want value inside the text area
  // console.log(textarea.value.value);

// We must give textarea.value to access the elemenet
textarea.value.addEventListener('keydown', (e) => {
  let t = textarea.value;
  // This code is of tab key
  if(e.key === 'Tab') {
  
    // this is how we do it get the first and end 
    let val = t.value,
    start = t.selectionStart,
    end = t.selectionEnd
    
    // set t value to: text before caret + tag + text after caret
    t.value = val.substring(0, start) + '\t' + val.substring(end);

    // put caret at right position again
    t.selectionStart = t.selectionEnd = start + 1;

    e.preventDefault(); 
  }
})
})
</script>

<template>
  <main>
    <textarea ref="textarea" style="width: 100%; height: 300px;">Hi There!</textarea>
  </main>
</template>


// Then we start to optimize the code
// For that we remove the manual EventListener and give the event in template and give the function in it, also delcare that function if someone clicks then this function executes and works fine


// **********************************   Second updated form ********************************

<script setup>
import { onMounted, ref } from 'vue';
let textarea = ref(null);  

function onKeydown(e){
  let t = textarea.value;
  if(e.key === 'Tab') {
    let val = t.value,
    start = t.selectionStart,
    end = t.selectionEnd

    t.value = val.substring(0, start) + '\t' + val.substring(end);
    t.selectionStart = t.selectionEnd = start + 1;

    e.preventDefault(); 
  }
}
</script>

<template>
  <main>
    <textarea ref="textarea" @keydown="onKeydown" style="width: 100%; height: 300px;">Hi There!</textarea>
  </main>
</template>
